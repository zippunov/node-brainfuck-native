'use strict';

const bfck = require('../');

describe('bfck', function () {

    it('runs "Hellow world"', function () {
        const code = `
        ++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>
        ---.+++++++..+++.>>.<-.<.+++.------.--------.>>+.>++.
        `;
        const result = bfck(code, '');
        expect(result).toBe('Hello World!\n');
    });

    it('runs "Echo"', function () {
        const code = `
        ,+[[-.,+]]
        `;
        const input = 'Native BF interpreter';
        const result = bfck(code, input);
        expect(result).toBe('Native BF interpreter');
    });

    it('runs "ROT13"', function () {
        const code = `
        ,+[-->++++[>++++++++<-]<[->+>-[>+>>]>[+[-<+>]>+>>]<<<<<<]>>[-]>>--[-[>
        -<[-]]]>+[-<+++++++++++++<[->-[>+>>]>[+[-<+>]>+>>]<<<<<]>[-]>[-]+>[<--
        >-[<+>-]]<[<<<<+++++++++++++>>>>-]]<<[-]<<+.[-]<,+]
        `;
        const input = 'Native BF interpreter';
        const result = bfck(code, input);
        expect(result).toBe('Angvir OS vagrecergre');
        const input2 = 'Angvir OS vagrecergre';
        const result2 = bfck(code, input2);
        expect(result2).toBe('Native BF interpreter');
    });

    it('runs "99 bottles of beer"', function () {
        const code = `
        >+++++++++[<+++++++++++>-]<[>[-]>[-]<<[>+>+<<-]>>[<<+>>-]>>>
        [-]<<<+++++++++<[>>>+<<[>+>[-]<<-]>[<+>-]>[<<++++++++++>>>+<
        -]<<-<-]+++++++++>[<->-]>>+>[<[-]<<+>>>-]>[-]+<<[>+>-<<-]<<<
        [>>+>+<<<-]>>>[<<<+>>>-]>[<+>-]<<-[>[-]<[-]]>>+<[>[-]<-]<+++
        +++++[<++++++<++++++>>-]>>>[>+>+<<-]>>[<<+>>-]<[<<<<<.>>>>>-
        ]<<<<<<.>>[-]>[-]++++[<++++++++>-]<.>++++[<++++++++>-]<++.>+
        ++++[<+++++++++>-]<.><+++++..--------.-------.>>[>>+>+<<<-]>
        >>[<<<+>>>-]<[<<<<++++++++++++++.>>>>-]<<<<[-]>++++[<+++++++
        +>-]<.>+++++++++[<+++++++++>-]<--.---------.>+++++++[<------
        ---->-]<.>++++++[<+++++++++++>-]<.+++..+++++++++++++.>++++++
        ++[<---------->-]<--.>+++++++++[<+++++++++>-]<--.-.>++++++++
        [<---------->-]<++.>++++++++[<++++++++++>-]<++++.-----------
        -.---.>+++++++[<---------->-]<+.>++++++++[<+++++++++++>-]<-.
        >++[<----------->-]<.+++++++++++..>+++++++++[<---------->-]<
        -----.---.>>>[>+>+<<-]>>[<<+>>-]<[<<<<<.>>>>>-]<<<<<<.>>>+++
        +[<++++++>-]<--.>++++[<++++++++>-]<++.>+++++[<+++++++++>-]<.
        ><+++++..--------.-------.>>[>>+>+<<<-]>>>[<<<+>>>-]<[<<<<++
        ++++++++++++.>>>>-]<<<<[-]>++++[<++++++++>-]<.>+++++++++[<++
        +++++++>-]<--.---------.>+++++++[<---------->-]<.>++++++[<++
        +++++++++>-]<.+++..+++++++++++++.>++++++++++[<---------->-]<
        -.---.>+++++++[<++++++++++>-]<++++.+++++++++++++.++++++++++.
        ------.>+++++++[<---------->-]<+.>++++++++[<++++++++++>-]<-.
        -.---------.>+++++++[<---------->-]<+.>+++++++[<++++++++++>-
        ]<--.+++++++++++.++++++++.---------.>++++++++[<---------->-]
        <++.>+++++[<+++++++++++++>-]<.+++++++++++++.----------.>++++
        +++[<---------->-]<++.>++++++++[<++++++++++>-]<.>+++[<----->
        -]<.>+++[<++++++>-]<..>+++++++++[<--------->-]<--.>+++++++[<
        ++++++++++>-]<+++.+++++++++++.>++++++++[<----------->-]<++++
        .>+++++[<+++++++++++++>-]<.>+++[<++++++>-]<-.---.++++++.----
        ---.----------.>++++++++[<----------->-]<+.---.[-]<<<->[-]>[
        -]<<[>+>+<<-]>>[<<+>>-]>>>[-]<<<+++++++++<[>>>+<<[>+>[-]<<-]
        >[<+>-]>[<<++++++++++>>>+<-]<<-<-]+++++++++>[<->-]>>+>[<[-]<
        <+>>>-]>[-]+<<[>+>-<<-]<<<[>>+>+<<<-]>>>[<<<+>>>-]<>>[<+>-]<
        <-[>[-]<[-]]>>+<[>[-]<-]<++++++++[<++++++<++++++>>-]>>>[>+>+
        <<-]>>[<<+>>-]<[<<<<<.>>>>>-]<<<<<<.>>[-]>[-]++++[<++++++++>
        -]<.>++++[<++++++++>-]<++.>+++++[<+++++++++>-]<.><+++++..---
        -----.-------.>>[>>+>+<<<-]>>>[<<<+>>>-]<[<<<<++++++++++++++
        .>>>>-]<<<<[-]>++++[<++++++++>-]<.>+++++++++[<+++++++++>-]<-
        -.---------.>+++++++[<---------->-]<.>++++++[<+++++++++++>-]
        <.+++..+++++++++++++.>++++++++[<---------->-]<--.>+++++++++[
        <+++++++++>-]<--.-.>++++++++[<---------->-]<++.>++++++++[<++
        ++++++++>-]<++++.------------.---.>+++++++[<---------->-]<+.
        >++++++++[<+++++++++++>-]<-.>++[<----------->-]<.+++++++++++
        ..>+++++++++[<---------->-]<-----.---.+++.---.[-]<<<]
        @
        `;
        const result = bfck(code, '').trim();
        expect(result.startsWith('99 Bottles of beer')).toBe(true);
        expect(result.endsWith('0 Bottles of beer on the wall')).toBe(true);
    });
});